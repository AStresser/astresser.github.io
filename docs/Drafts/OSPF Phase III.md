# OSPF. Phase III - виды и типы пакетов

Для реализации протокола на каждом его этапе используются различные служебные сообщения. Посмотрим на них подробнее.

## Типы пакетов

Существует пять основных типов:

- **Hello packet** - находит соседей и устанавливает отношения смежности.
- **Database Description Packet** - проверяет синхронизацию БД между роутерами.
- **Link-State Request** - запрашивает запись о состоянии определенного канала у роутера (для другого роутера).
- **Link-State Update** - отвечает на Request и содержит информацию об определенной записи состояния канала.
- **Link-State Acknowledgment Packet** - подтверждает получение всех других.

## Типы пакетов LSU (краткое)

Разница между LSU и LSA может быть слегка неочевидной: LSU содержит LSA, иногда даже несколько.

Тип LSA определяет то, может ли он распространяться за пределы родной зоны, какую информацию передает и какую функцию выполняет. Всего существует 11 типов LSA, подробнее о них имеет смысл говорить в отдельной главе.

## Hellо-пакеты

Эти пакеты нужны чтобы устанавливать отношения смежности, а именно:

1. **Находить** соседей с включенным OSPF
2. **Обмениваться** параметрами OSPF, которые должны совпадать для установления отношения смежности между соседями.
3. **Выбирать** Designated Router (DR) и Backup Designated Router (BDR) в сетях множественного доступа, то есть в нашем любимом Ethernet, то есть в подавляющем большинстве случаев.

Чтобы отношения смежности состоялись, должны совпасть следующие настройки OSPF, передаваемые этими самыми пакетами в параметрах:

- **Hello Interval** - интервал времени, через который роутеры обмениваются hello-пакетами для того, чтобы убедиться в доступности друг друга. Keep-alive система как она есть.
- **Dead Interval** - интервал времени, после которого в случае не получения hello-пакета от соседа, он считается трагически погибшим, что инициирует процесс перестроения LSDB и рассылки обновлений остальным соседям.
- **Одна подсеть** - интерфейсы должны находиться в одной подсети.
- **Номер зоны** - должны совпадать.
- **Router ID** - должны быть уникальны, настраиваются администратором или выбираются роутером как высший адрес активного интерфейса. Хорошей практикой считается создание loopback-интерфейса с маской /32 для использования в качестве ID.
- **Размер MTU** - должны совпадать.